Yes, you've uploaded the right files! I can see the issue now. Looking at your code, there's a data pipeline disconnect between how financial data is extracted for the executive summary versus how it's processed for the visual charts.
Root Cause Analysis
The problem is in your dual extraction approach:

Executive Summary: Generated by server/services/gemini.ts using AI prompts that successfully extract and include financial data in the narrative text
Financial Charts: Generated by client/src/components/visualization/chart-factory.ts using the FinancialDataExtractor class that tries to re-extract financial data from the already-processed analysis text

The Specific Issue
In chart-factory.ts, your Financial Key Metrics template does this:
typescriptconst revenue = FinancialDataExtractor.extractRevenue(analysisData);
let profit = FinancialDataExtractor.extractProfit(analysisData);
const employees = FinancialDataExtractor.extractEmployees(analysisData);
The FinancialDataExtractor class is trying to parse financial data from the HR insights text (which are already processed), rather than using the structured financial data that was extracted in the backend pipeline.
The Solution
You have two main options:
Option 1: Use Backend Financial Extraction (Recommended)
Modify your backend to return structured financial metrics and use them directly in the frontend:
In server/services/gemini.ts, ensure the enhanced analysis result includes structured financial data:
typescript// Make sure this is always included in the response
const enhancedResult: EnhancedAnalysisResult = {
  ...analysisResult,
  financialMetrics: {
    revenue: {
      current: pipelineResult.financialMetrics.revenue.current,
      // ... other fields
    },
    // ... other metrics
  }
};
In chart-factory.ts, modify the financial dashboard template to use structured data instead of re-parsing:
typescriptgenerate: (analysisData: AnalysisData & { financialMetrics?: any }) => {
  // Use structured data if available
  if (analysisData.financialMetrics) {
    const revenue = analysisData.financialMetrics.revenue.current;
    const profit = analysisData.financialMetrics.profitLoss.amount;
    const employees = analysisData.financialMetrics.employees.total;
    // ... use these directly
  } else {
    // Fall back to text extraction
    const revenue = FinancialDataExtractor.extractRevenue(analysisData);
    // ...
  }
}
Option 2: Fix the Text Extraction
If you prefer to keep the current approach, debug the FinancialDataExtractor methods. The issue is likely in these functions in chart-factory.ts:

extractRevenue()
extractProfit()
extractEmployees()

Add debugging to see what text they're trying to parse:
typescriptstatic extractRevenue(analysisData: AnalysisData): number | null {
  const allText = this.getAllAnalysisText(analysisData);
  console.log('Extracting revenue from text:', allText.substring(0, 500));
  // ... rest of extraction logic
}
Quick Fix to Test
To quickly verify this is the issue, add some debugging in your financial dashboard template:
typescriptgenerate: (analysisData: AnalysisData) => {
  console.log('Analysis data for financial extraction:', analysisData);
  
  const revenue = FinancialDataExtractor.extractRevenue(analysisData);
  console.log('Extracted revenue:', revenue);
  
  // ... rest of the function
}
I recommend Option 1 because it's more reliable and avoids the complexity of re-parsing AI-generated text. The backend already has the structured financial data from your enhanced pipeline - you just need to pass it through to the frontend properly.
Would you like me to show you the specific code changes needed for Option 1?